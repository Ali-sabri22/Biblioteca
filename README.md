# Biblioteca
Il programma realizza un sistema di gestione bibliotecaria completo, basato su una serie di strutture dati in memoria e su persistenti file di testo/CSV. All’avvio, vengono caricati da disco due database principali: le librerie con i loro cataloghi di libri e gli utenti già registrati. Le librerie sono identificate da un nome e contengono vettori di Libro, ciascuno dotato di titolo, autore, anno di pubblicazione e numero di copie disponibili. Gli utenti, invece, conservano nome, codice fiscale, numero di telefono, stato di registrazione, sconto applicabile e penalità accumulata.

La gestione del codice fiscale utilizza una semplice espressione regolare per garantire la correttezza del formato italiano (16 caratteri, alternanza di lettere e numeri). Quando si registra un nuovo utente, i suoi dati—comprensivi di data di registrazione e sconto di default—vengono appesi a un file CSV. In questo modo, ogni sessione del programma recupera gli utenti esistenti senza perdita di informazioni.

Il cuore del sistema è la gestione dei prestiti e delle restituzioni. Per prestare un libro si verifica se esiste disponibilità; in caso affermativo, si decrementa la quantità e si crea un record di Prestito con data di prestito e data di scadenza. Gli utenti registrati godono di cinque giorni di tolleranza extra prima che una multa giornaliera di 0,50 € venga applicata. Al momento della restituzione, se la data supera la scadenza maggiorata della tolleranza, il ritardo viene calcolato in giorni e la relativa multa sommata al conto dell’utente. La funzione di calcolo multa è parametrica e moltiplica i giorni di ritardo per la tariffa quotidiana. Un’ulteriore funzione segnala la perdita di un libro, applicando automaticamente una penalità fissa di 20 €.

Tutte le operazioni di modifica del catalogo – aggiunta o rimozione di un titolo – avvengono mediante funzioni dedicate che aggiornano il vettore interno della libreria attiva. Gli utenti possono inoltre cercare libri per sottostringa su titolo o autore: il sistema restituisce un elenco di risultati che può mostrare disponibilità e metadati.

L’interfaccia testuale si basa su menu a scelta numerica: dal menu principale si accede alle funzioni di visualizzazione, registrazione, prestito, restituzione, segnalazione di smarrimenti, ricerca e gestione libreria, oltre al salvataggio esplicito dei dati su file. La stampa a video dei cataloghi sfrutta i manipolatori std::left e std::setw per generare tabelle allineate in colonne (Libreria, Titolo, Autore, Anno, Disponibilità), migliorando la leggibilità.

Infine, il flusso principale nel main() gestisce il ciclo di input utente, invocando in modo modulare le diverse funzionalità e garantendo che, prima di ogni uscita, lo stato corrente di librerie e utenti venga salvato, preservando così la coerenza e la persistenza dei dati tra le sessioni.
